{"mappings":"YAGA,IAAMA,EAAO,CACXC,KAAMC,SAASC,cAAc,oBAC7BC,KAAMF,SAASC,cAAc,aAG/BH,EAAKC,KAAKI,iBAAiB,UAE3B,SAAsBC,GACpBA,EAAMC,iBAEN,IAAuBC,EAAAF,EAAMG,cAAcC,SAAnCC,EAAeH,EAAfG,KAAMC,EAASJ,EAATI,MAUhB,SAAwBD,EAAMC,GAC5B,IAAMC,EAAW,+BAIXC,EAAS,IAAIC,gBAAgB,CACjCC,IAJc,kCAKdC,EAAGN,EACHC,OACAM,KAAM,OAKR,OAAOC,MAAM,GAA6BC,OAA1BP,EAAS,mBAAwBO,OAAPN,IAAUO,MAAK,SAACC,GAEX,IAAxCA,EAASC,GACZ,MAAM,IAAIC,MACR,6BAAiFJ,OAA9BE,EAASG,OAAO,gBAAyCL,OAApBE,EAASI,aAIrG,OAAOJ,EAASK,M,KA9BwCC,CAA3CjB,EAAKkB,MAAOjB,EAAKiB,OACkCR,MAA1D,SAACS,GACL9B,EAAKI,KAAK2B,UAAyBD,EAAKE,SAASC,YAkClDC,KACC,SAAAC,G,IACEC,EAAID,EAAJC,KAAIC,EAAAF,EACJG,IACEC,EAASF,EAATE,UAASC,EAAAH,EACTI,UAAaC,EAAIF,EAAJE,KAAMC,EAAIH,EAAJG,K,MAEjB,gDACsBvB,OAAduB,EAAK,WACEvB,OADOsB,EAAK,sDAEJtB,OADRgB,EAAK,4CAEEhB,OADCsB,EAAK,2CACItB,OAAVmB,EAAU,8B,IAIvCK,KAAK,G,IA/CLC,OAAM,SAACC,G,OAAQC,QAAQC,IAAIF,E,IACAG,SAAnB,W,OAAMjD,EAAKC,KAAKiD,O","sources":["src/index.js"],"sourcesContent":["// X-Content-Type-Options: nosniff\nimport './sass/styles.css'\n\nconst refs = {\n  form: document.querySelector(\".js-search-form \"),\n  list: document.querySelector(\".js-list\"),\n};\n\nrefs.form.addEventListener(\"submit\", handleSearch);\n\nfunction handleSearch(event) {\n  event.preventDefault();\n\n  const { city, days } = event.currentTarget.elements; // витягаємо з полів форми посилання на інпут для міста і селект для днів\n\n  serviceWeather(city.value, days.value) // викликаємо сервіс для запиту на сервер і передаємо відповідну інформацію\n    .then((data) => {\n      refs.list.innerHTML = createMarkup(data.forecast.forecastday); // створюємо розмітку і записуємо її у ul\n    })\n    .catch((err) => console.log(err)) // ловимо помилку за межами фунції\n    .finally(() => refs.form.reset()); // очищуємо поля форми після відповіді від сервера\n}\n\nfunction serviceWeather(city, days) {\n  const BASE_URL = \"http://api.weatherapi.com/v1\";\n  const API_KEY = \"8139685a465a481bb41105758232809\";\n\n  // створюємо параметри запиту за допомогою класу URLSearchParams, де у вигляді обʼєкту зручно описуємо параметри, замість того, щоб писати їх в строці\n  const params = new URLSearchParams({\n    key: API_KEY,\n    q: city,\n    days,\n    lang: \"uk\",\n  });\n  //    fetch(\n  //     `${BASE_URL}/forecast.json?key=${API_KEY}&q=${city}&days=${days}&lang=uk`\n  //     )\n  return fetch(`${BASE_URL}/forecast.json?${params}`).then((response) => {\n    // якщо ok === false - вручну викидуємо помилку (наприклад, коли статус 404)\n    if (!response.ok) {\n      throw new Error(\n        `Вимушена помилка статусу: ${response.status} | Причина: ${response.statusText}`\n      );\n    }\n\n    return response.json();\n  });\n}\n\nfunction createMarkup(arr) {\n  return arr\n    .map(\n      ({\n        date,\n        day: {\n          avgtemp_c,\n          condition: { text, icon },\n        },\n      }) => `<li class=\"weather-card\">\n        <img src=\"${icon}\" alt=\"${text}\" class=\"weather-icon\">\n        <h2 class=\"date\">${date}</h2>\n        <h3 class=\"weather-text\">${text}</h3>\n        <h3 class=\"temperature\">${avgtemp_c} °C</h3>\n    </li>\n      `\n    )\n    .join(\"\");\n}\n"],"names":["$b8f9b7833fa37166$var$refs","form","document","querySelector","list","addEventListener","event","preventDefault","_elements","currentTarget","elements","city","days","BASE_URL","params","URLSearchParams","key","q","lang","fetch","concat","then","response","ok","Error","status","statusText","json","$b8f9b7833fa37166$var$serviceWeather","value","data","innerHTML","forecast","forecastday","map","param","date","_day","day","avgtemp_c","_condition","condition","text","icon","join","catch","err","console","log","finally","reset"],"version":3,"file":"index.9e27f15e.js.map"}